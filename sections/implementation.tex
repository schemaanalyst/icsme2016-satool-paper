\begin{figure}
\lstinputlisting{figures/Usage.txt}
\caption{\label{fig:usage} The first section of the \sa~help menu.}
\vspace*{-.1in}
\end{figure}

\section{Implementation}\label{sec:implementation}
\subsection{Design}

% Introduce the design and implementation of the SchemaAnalyst tool; closing with a commentary about the fact that the
% chosen SQL parser is a commercial product that we cannot release on GitHub.

\sa~is implemented in the Java programming language.  Designed with extensibility in mind, the \sa~tool is divided into
$13$ packages, which this paper briefly overviews. The \texttt{sqlrepresentation} package provides an intermediate Java
representation of data structures in relational databases, fully modelling database tables, columns, expressions, data
types, integrity constraints, and other relevant entities. These objects enable \sa~to support multiple DBMSs (i.e.,
\sqlite, \postgres, and \hypersql), and, additionally, allow for the inclusion of new DBMSs. The tool also contains the
\texttt{sqlparser} package that wraps the General SQL Parser~\cite{generalsqlparser}, thus enabling the effective
conversion of a schema expressed in the Structured Query Language (SQL) to the tool's intermediate representation. As
this SQL parser is a commercial product, the open-source version of \sa~does not provide it for download on GitHub.
Therefore, users can experiment with \sa~by either testing the provided schemas or (automatically or manually)
converting a new schema to the tool's internal SQL representation.

% Go into additional details about some of the packages (breaking up an otherwise too-long paragraph)

Table~\ref{tab:args} summarizes the coverage criteria and data generators furnished by \sa. The \texttt{testgeneration}
package provides a representation of test suites and test cases, as well as test requirements and the nine provided
coverage criteria~\cite{mcminn2015effectiveness}.  The \texttt{data} package furnishes the three provided test data
generators, as well as various generic data-type representations for use during test data generation. The \texttt{dbms}
package provides support for three DBMSs, and includes the classes that enable interaction with an installed DBMSs. The
\texttt{sqlwriter} package furnishes support for creating SQL statements for use with DBMSs, and is used with the
\texttt{javawriter} package to encode the generated test data as a JUnit test suite.  The \texttt{mutation} package
provides the mutation analysis functionality, including the 14 provided mutation operators, mutant equivalence and
reduction features~\cite{wright2014impact}, and means for quickly performing mutation analysis~\cite{mcminn2016virtual}.

\subsection{Usage}

% NOTE: The lstinline command must be on a full line and no line wrapping is allowed (will cause compiler error)

% Explain how the tool is released, downloaded, and built and setup for running

\sa~is publicly available on GitHub under an open-source license~\cite{tool}. After cloning the Git
repository, the project can be built using Gradle by running the following command in the project's root directory:
\lstinline{./gradlew compile}. After the tool compiles, set the \lstinline{CLASSPATH} variable using the following
command: \lstinline{export CLASSPATH="build/classes/main:build/lib/*:lib/*:."}.

% Talk about installing the databases and then make a reference to the documentation

Optionally, the user can install the \postgres, \sqlite, and \hypersql~DBMSs. Since \sqlite~does not require
configuration on the machine running \sa, it is currently the default option. If installed, \sa~can run test data on
the installed databases. The tool also supports a ``virtual'' DBMS executor allowing SQL statements to be simulated. If the use
of an actual DBMS is desired, the user should refer to online documentation for configuration instructions~\cite{tool}.

\input{figures/features}

% Basically, explain the help menu and then the way to generate test data at the command line

Usage instructions for \sa~can be obtained by running \lstinline{java org.schemaanalyst.util.Go --help}.
Figure~\ref{fig:usage} shows a snippet of this menu.  As indicated by the help display, \sa~first expects options
indicating the desired schema, coverage criterion, data generator, and DBMS\@. Defaults are provided for all of these
options except for the schema option, which is required. The user must then give a command.  The two supported commands
are \lstinline{generation}, used to generate test data, and \lstinline{mutation}, used to evaluate the quality of test
data.  To run \sa~to generate test data for the provided \texttt{Inventory} schema, the following command could be used:
\lstinline{java org.schemaanalyst.util.Go -s parsedcasestudy.Inventory generation}.

% Discuss the type of output that the tool can produce

With no other command-line options, \sa~will create a Java class containing a JUnit test suite with the generated test
data. By default, this class will be created under the \texttt{generatedtest} package and saved in a folder of the same
name in the tool's root directory.  The user may append the \lstinline{--inserts} option to the \lstinline{generation}
command to obtain the generated test data in the form of SQL \texttt{INSERT} statements that are saved in plain text
instead of a JUnit test suite.

\input{figures/schemas/schemas}

If the \lstinline{mutation} command is given to perform mutation analysis on the test data generated by
\sa, a folder called \lstinline{results} will be created in the project's root directory.
This folder will contain a comma-separated list file recording the parameters used in the analysis as well
as the mutation score along with some runtime information.

The help menu provided by the \lstinline{--help} option (Figure~\ref{fig:usage}) shows a complete list of \sa's command
line arguments with descriptions. Table~\ref{tab:args} shows the coverage criteria and data generators provided with
\sa. The \sa~GitHub page also provides comprehensive documentation, including more detailed installation and usage
instructions~\cite{tool}. The source code of \sa~has also been thoroughly documented, and includes a JUnit test suite to
maintain reliability.


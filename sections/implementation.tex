\begin{figure}
\lstinputlisting{figures/Usage.txt}
\caption{\label{fig:usage} The first section of the \sa help menu.}
\end{figure}

\section{Implementation}\label{sec:implementation}
\subsection{Design}

% Introduce the design and implementation of the SchemaAnalyst tool

\sa~is implemented as a Java program.  Designed with extensibility in mind, the \sa~tool is divided into 13 packages.
The \texttt{sqlrepresentation} package provides an intermediate Java representation of data structures in relational
databases, providing representations for database tables, columns, expressions, datatypes, integrity constraints, and
other relevant entities. These objects enable \sa to support multiple DBMSs (i.e., \sqlite, \postgres, and \hypersql),
and allow for the addition of new DBMSs. A \texttt{sqlparser} package is provided that utilizes the General SQL
Parser~\cite{} to convert schemas expressed in the Structured Query Language (SQL) to the Java intermediate
representation. The \texttt{testgeneration} package provides a representation of test suites and test cases, as well as
test requirements and the nine provided coverage criteria. The \texttt{data} package furnishes the three provided test
data generators, as well as various generic data-type representations for use during test data generation. The
\texttt{dbms} package provides support for the three currently supported DBMSs, and includes the classes that enable
interaction with installed DBMSs. The \texttt{sqlwriter} package provides support for creating SQL statements for use
with DBMSs, and is used with the \texttt{javawriter} package to encode the generated test data as a JUnit test suite.
The \texttt{mutation} package provides the mutation analysis functionality, including the 14 provided mutation
operators, mutant equivalence and reduction features~\cite{wright2014impact}, and virtual test suite
executors~\cite{mcminn2016virtual}.

\subsection{Usage}

% NOTE: The lstinline command must be on a full line and no line wrapping is allowed (will cause compiler error)

\sa is publicly available on GitHub under an open-source license~\cite{tool}. After cloning the Git
repository, the project can be built using Gradle with the following command from the project's root directory:
\lstinline{./gradlew compile}. After the project compiles, set the \lstinline{CLASSPATH} variable using the following
command: \lstinline{export CLASSPATH="build/classes/main:build/lib/*:lib/*:."}.

Optionally, the user can install the \postgres, \sqlite, and \hypersql~DBMSs. Since SQLite does not require
configuration on the machine running \sa, it is included as the default option. If installed,
\sa~can run test data on the installed databases. \sa~also supports a virtual DBMS
executor allowing SQL statements to be simulated. If the use of the actual DBMS is desired, the user should refer to
online documentation on configuring the DBMSs~\cite{tool}.

\input{figures/features}

Usage instructions for \sa~can be obtained by: \lstinline{java org.schemaanalyst.util.Go --help}.
Figure~\ref{fig:usage} shows a snippet of this menu.  As indicated by the help display, \sa~first
expects options indicating the desired schema, coverage criterion, data generator, and DBMS\@. Defaults are provided for
all of these options except for the schema option, which is required. The user must then give a command.  The two
supported commands are \lstinline{generation}, used to generate test data, and \lstinline{mutation}, used to evaluate
the quality of test data.  To use \sa~to generate test data for the provided Inventory schema, the
following command could be used: \lstinline{java org.schemaanalyst.util.Go -s parsedcasestudy.Inventory generation}.

With no other command line options, \sa~will create a Java class containing a JUnit test suite with
the generated test data. By default, this class will be created under the \texttt{generatedtest} package, and saved in a
folder of the same name in the root directory of the tool.  The user may append the \lstinline{--inserts} option to the
\lstinline{generation} command to obtain the generated test data in the form of SQL \texttt{INSERT} statements in plain
text instead of a JUnit test suite.

\input{figures/schemas/schemas}

If the \lstinline{mutation} command is given to perform mutation analysis on the test data generated by
\sa, a folder called \lstinline{results} will be created in the project's root directory.
This folder will contain a comma-separated list file recording the parameters used in the analysis as well
as the mutation score along with some runtime information.

The help menu provided by the \lstinline{--help} option (Figure~\ref{fig:usage}) shows a complete list of \sa's command
line arguments with descriptions. Table~\ref{tab:args} shows the coverage criteria and data generators provided with
\sa. The \sa~GitHub page also provides comprehensive documentation, including more detailed installation and usage
instructions~\cite{tool}. The source code of \sa~has also been thoroughly documented, and includes a JUnit test suite to
maintain reliability.

